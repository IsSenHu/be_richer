## Java对象的访问方式

[TOC]

一般来说，一个Java对象的引用访问涉及到3个内存区域：JVM栈、堆、方法区。以最简单的本地变量引用为例：

```Java
Person person = new Person();
```

Person person表示一个本地引用，存储在JVM栈的本地变量表中，表示一个reference类型数据；new Person()作为实例对象数据存储在堆中。堆中还记录了类信息（接口、方法、field、对象类型等）的地址，这些地址所执行的数据存储在方法区中。在Java虚拟机规范中，对于通过reference类型引用访问对象的方式并未做规定，目前主流的实现方式主要有两种：

1. 通过句柄访问
2. 通过直接指针访问

### 一、通过句柄访问

![](http://studysssmd.oss-cn-chengdu.aliyuncs.com/jvm/memory/%E6%88%AA%E5%B1%8F2020-04-24%E4%B8%8A%E5%8D%8811.18.25.png)

通过句柄访问的实现方式中，JVM堆中会专门有一块区域用来作为句柄池，存储相关句柄所执行的实例数据地址（包括在堆中地址和在方法区中的地址）。这种实现方法由于用句柄表示地址，因此十分稳定。

### 二、通过直接指针访问

![](http://studysssmd.oss-cn-chengdu.aliyuncs.com/jvm/memory/%E6%88%AA%E5%B1%8F2020-04-24%E4%B8%8A%E5%8D%8811.19.49.png)

通过直接指针访问的方式中，reference中存储的就是对象在堆中的实际地址，在堆中存储的对象信息中包含了在方法区中的相应类型数据。这种方法最大的优势是速度快，在HotSpot虚拟机中用的就是这种方式。